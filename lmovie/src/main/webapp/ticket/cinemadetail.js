;/*!cinema:widget/cinemadetail/map/map.js*/
define("cinema:widget/cinemadetail/map/map.js",function(require,exports,module){var dialog=require("common:widget/ui/dialog/dialog"),DIALOG_TMPL=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<div class="widget-cinema-detail-map-dialog">    <h4 class="map-title">    ',"undefined"==typeof name?"":baidu.template._encodeHTML(name),'    <a class="cellphone font-shadow font14" href="https://d.nuomi.com/inter/group"    target="_blank">用百度糯米手机版，随时随地查看商家地图</a>    <a class="download nuomi-red font16" href="https://d.nuomi.com/inter/group" target="_blank">免费下载</a>    </h4>    <div class="map-con fl">        <div class="dialog-map-left" id="dialogMap">        </div>    </div>    <div class="dialog-map-right fr" id="dialogDetail">    </div></div>'),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],map={init:function(a){var e=this;a&&a.longitude&&a.latitude&&(e.info=a||{},e.ele=$("#mapArea"),e.watch=e.ele.find(".watch"),e.bind())},bind:function(){var a=this;a.createMap(),a.watch.on("click",function(){a.initDialogMap(),a.showAllMap()})},initDialogMap:function(){$("#dialogDetail").html(""),$("#dialogMap").html("")},createMap:function(){var a=this,e=a.info,t=e.longitude,i=e.latitude,n=new BMap.Map("cinemaMap"),l=new BMap.Point(t,i);n.centerAndZoom(l,13),n.enableScrollWheelZoom(!0);var o=new BMap.Marker(l);n.addOverlay(o)},showAllMap:function(){var a=this,e=a.getMapStr();a.dialog=dialog.init({html:e,width:980,height:500,zIndex:0}),a.dialog.show(),a.createInfoWindow()},createInfoWindow:function(){function a(){d.open(r)}var e=this,t=e.info||{},i=t.phone,n='<div><p style="line-height: 18px;">'+(t.address||"")+"</p>"+(i&&i.length>0?'<p style="line-height: 18px;">'+i.join(",")+"</p>":"")+"</div>",l=new BMap.Map("dialogMap"),o=new BMap.Point(t.longitude,t.latitude);l.centerAndZoom(o,16),l.enableScrollWheelZoom();var d=null;d=new BMapLib.SearchInfoWindow(l,n,{title:t.name||"",width:290,height:"auto",panel:"dialogDetail",enableAutoPan:!0,searchTypes:[BMAPLIB_TAB_TO_HERE,BMAPLIB_TAB_SEARCH,BMAPLIB_TAB_FROM_HERE]});var r=new BMap.Marker(o);d.open(r),l.addOverlay(r),l.removeEventListener("click",a),r.addEventListener("click",a)},getMapStr:function(){var a=this,e=a.info,t=DIALOG_TMPL(e);return t}};module.exports=map});
;/*!cinema:widget/cinemadetail/intro/intro.js*/
define("cinema:widget/cinemadetail/intro/intro.js",function(i,n,e){var t=i("cinema:widget/cinemadetail/map/map.js"),a={init:function(i){{var n=this;n.ele=$("#cinemaIntro")}n.map=$("#cinemaMap"),n.info=i||{},n.render(),n.bind()},render:function(){var i=this,n=i.info;t.init(n)},bind:function(){}};e.exports=a});
;/*!cinema:widget/cinemadetail/movielist/movielist.js*/
define("cinema:widget/cinemadetail/movielist/movielist.js",function(e,i,a){var t={init:function(){var e=this;e.pageData=Page.getData(),e.getEle(),e.render(),e.bind()},getEle:function(){var e=this;e.ele=$("#cinemaMovielist"),e.slider=$("#flexslider"),e.sliderBg=$("#sliderBg"),e.datelist=$("#datelist"),e.movieDetail=$("#movieDetail")},render:function(){var e=this,i=e.pageData,a=i.movieId,t=i.date,s=e.ele.find("li[data-movieid="+a+"]").index()||0,l=$(".flexslider").flexslider({controlNav:!1,pauseOnAction:!0,pauseOnHover:!1,animation:"slide",animationLoop:!0,itemWidth:144,itemHeight:209,itemMargin:18,move:5,slideshow:!1,startAt:0});setTimeout(function(){e.slider.find("li").eq(s).addClass("active").siblings().removeClass("active"),s>=5&&l.flexslider(Math.round(s/5))},100),e.flex=l,e.selectDate(t),e.selectDetail(a)},bind:function(){var e=this,i=(e.ele,e.slider),a=e.datelist;i.on("click",'.slides li:not(".empty")',function(){{var i=$(this),a=i.attr("data-movieid"),t=$(".date[data-movieid="+a+"]");i.index()}if(!i.hasClass("active")){i.addClass("active").siblings().removeClass("active"),t.removeClass("hide").addClass("active").siblings().removeClass("active").addClass("hide");var s=i.attr("data-bgimg");e.sliderBg.css({background:'url("'+s+'") no-repeat center top transparent',backgroundSize:"100% auto"}),e.selectDetail(a)}}),a.on("click","span",function(){var e=$(this),i=e.attr("data-id");if(!e.hasClass("active")){e.addClass("active").siblings().removeClass("active");var a=e.parent().parent().find(".session-list[data-id="+i+"]");$(a).addClass("active").siblings(".session-list").removeClass("active")}})},selectMovie:function(e){var i=this,a=i.datelist.find(".date[data-movieid="+e+"]");a.addClass("active").siblings().removeClass("active")},selectDate:function(e){function i(){c.eq(0).addClass("active").siblings().removeClass("active"),m.eq(0).addClass("active").siblings().removeClass("active")}var a,t,s,l,d=this,n=new Date(Number(e)),v=n.getMonth(),r=n.getDate(),o=d.datelist.find(".date.active"),c=o.find(".datelist span"),m=o.find(".session-list "),f=c.length;if(!e)return void i();for(var g=0;f>g;g++)if(a=c.eq(g),s=a.attr("data-id"),t=new Date(Number(s)),t.getMonth()==v&&t.getDate()==r){a.addClass("active").siblings().removeClass("active"),m.filter("[data-id="+s+"]").addClass("active").siblings().removeClass("active"),l=!0;break}l||i()},selectDetail:function(e){var i=this;i.movieDetail.find("[data-id="+e+"]").addClass("active").siblings().removeClass("active")}};a.exports=t});
;/*!cinema:widget/cinemadetail/cinemadetail.js*/
define("cinema:widget/cinemadetail/cinemadetail.js",function(i,t,a){var e=i("cinema:widget/cinemadetail/intro/intro.js"),n=i("common:static/util/location"),c=i("cinema:widget/cinemadetail/movielist/movielist.js"),o={init:function(){var i=this;i.pageData=Page.getData(),i.location=n.getCity(),i.getEle(),i.getData(),i.bind()},getEle:function(){var i=this;i.ele=$("#pageCinemaCinemadetail")},bind:function(){{var i=this,t=i.ele;$("#detailNav")}t.on("click","#detailNav a",function(){var i=$(this);i.addClass("active").siblings().removeClass("active")})},getData:function(){var i=window.info||{};e.init(i),c.init(i)}};a.exports=o});
;/*!cinema:widget/cinemadetail/detail/detail.js*/
define("cinema:widget/cinemadetail/detail/detail.js",function(t,a,e){var i={init:function(){var t=this,a=t.ele=$("#cinemaDetail");t.x=a.attr("data-x"),t.y=a.attr("data-x")},render:function(){var t=this;t.createMap(t.x,t.y)},createMap:function(){}};e.exports=i});