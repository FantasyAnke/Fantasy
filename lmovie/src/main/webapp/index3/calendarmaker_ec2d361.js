define("movie:widget/boxoffice/calendar/calendarmaker.js",function(){$.fn.calendar=function(t,e){"function"==typeof t?(e=t,t={}):(t=t||{},e=e||function(){});var a={prefix:"widget",isRange:!1,limitRange:[],highlightRange:[],onChange:function(){},onSelect:function(){}},n=$.extend({},a,t);return this.each(function(){var t,e,a,i=$(this),r=$("<table>").appendTo(i),o=$("<caption>").appendTo(r),h=$('<a class="'+n.prefix+'-prevYear" href="javascript:;">&lt;&lt;</a>').appendTo(o),d=$('<a class="'+n.prefix+'-prevMonth" href="javascript:;">&lt;</a>').appendTo(o),c=$("<span>").appendTo(o),s=$('<a class="'+n.prefix+'-nextMonth" href="javascript:;">&gt;</a>').appendTo(o),l=$('<a class="'+n.prefix+'-nextYear" href="javascript:;">&gt;&gt;</a>').appendTo(o),g=$('<a class="'+n.prefix+'-back" href="javascript:;">今天</a>').appendTo(o),f=[];r.append("<thead><tr><th>日</th><th>一</th><th>二</th><th>三</th><th>四</th><th>五</th><th>六</th></tr></thead>");var p=$("<tbody>").appendTo(r),u=function(t,e,a){var n=arguments.length&&t?new Date(t,e-1,a):new Date,i={year:n.getFullYear(),month:n.getMonth()+1,day:n.getDate(),week:n.getDay()};return i.code=""+i.year+(i.month>9?i.month:"0"+i.month)+(i.day>9?i.day:"0"+i.day),i},v=function(t){var e=new Date(t.year,t.month,0);return e.getDate()},y=function(e){if(n.limitRange.length){e.status="disabled";for(var a=0;a<n.limitRange.length;a++){var i=n.limitRange[a][0],r=n.limitRange[a][1];if("today"===i&&(i=t.code),"today"===r&&(r=t.code),i>r&&(i=[r,r=i][0]),e.code>=i&&e.code<=r){e.status="";break}}}if(e.sign=[],n.highlightRange.length)for(var a=0;a<n.highlightRange.length;a++){var i=n.highlightRange[a][0],r=n.highlightRange[a][1];if("today"===i&&(i=t.code),"today"===r&&(r=t.code),i>r&&(i=[r,r=i][0]),e.code>=i&&e.code<=r){e.sign.push("highlight");break}}return e.code===t.code&&e.sign.push("today"),e},m=function(e){"undefined"==typeof e&&(e=t),a=u(e.year,e.month,1);for(var i=v(a),r=[],o={},h=a.week;h>0;h--){o=u(a.year,a.month,a.day-h);var d=y(o);n.limitRange.length||(d.status="disabled"),r.push(d)}for(var h=0;i>h;h++){o={year:a.year,month:a.month,day:a.day+h,week:(a.week+h)%7},o.code=""+o.year+(o.month>9?o.month:"0"+o.month)+(o.day>9?o.day:"0"+o.day);var d=y(o);r.push(d)}for(var c=o,h=1;c.week+h<7;h++){o=u(c.year,c.month,c.day+h);var d=y(o);n.limitRange.length||(d.status="disabled"),r.push(d)}return r},k=function(t){n.onChange(a);for(var e=0;e<t.length;e++){var i=t[e];"active"===i.status&&(i.status="")}if(2===f.length)for(var r=f[0].code,o=f[1].code,e=0;e<t.length;e++){var i=t[e];if(i.code>=r&&i.code<=o){if("disabled"===i.status){f[1]=i;break}i.status="active"}}else if(1===f.length)for(var e=0;e<t.length;e++){var i=t[e];i.code===f[0].code&&(i.status="active")}for(var h="<tr>",e=0,d=t.length;d>e;e++){for(var s=t[e],l=[],g=0;g<s.sign.length;g++)l.push(n.prefix+"-"+s.sign[g]);s.status&&l.push(n.prefix+"-"+s.status);var u=l.join(" ");h+="<td"+(u?' class="'+u+'"':"")+' data-id="'+e+'">'+(s.link?'<a href="'+s.link+'">'+s.day+"</a>":"<span>"+s.day+"</span>")+"</td>",e%7===6&&d-1>e&&(h+="</tr><tr>")}h+="</tr>",c.html(a.year+"年"+a.month+"月"),p.html(h)};t=u(),a={year:t.year,month:t.month},d.click(function(){a.month--,e=m(a),k(e)}),s.click(function(){a.month++,e=m(a),k(e)}),h.click(function(){a.year--,e=m(a),k(e)}),l.click(function(){a.year++,e=m(a),k(e)}),g.click(function(){e=m(),k(e)}),g.hide(),i.on("click","td",function(){var t=($(this),$(this).data("id")),a=e[t];"disabled"!==a.status&&(n.isRange?1!==f.length?(f=[a],k(e)):(f.push(a),f.sort(function(t,e){return t.code>e.code}),k(e),n.onSelect(f)):(f=[a],k(e),n.onSelect(f)))}),e=m(),k(e)})}});