;/*!common:static/util/account.js*/
define("common:static/util/account.js",function(o,t,n){function a(o,t){var n="",a=t?"&"+encodeURIComponent(t):"";switch(o){case"login":n=s+r;break;case"logout":n=u}return e+n+c+encodeURIComponent(a)}var i=o("common:static/util/http"),e="https://passport.baidu.com",s="v2/",c="&tpl=cmovie",r="?login",u="?logout",p=(window.location.href,window.location.host,window.location.protocol),l=p+"//"+window.location.host+"/static/common/static/html/v3Jump.html",m={getUser:function(){var o=window._commonData||{},t=o.user||{};return t},isLogin:function(o){var t="/user/getuser";if(o&&"function"==typeof o){var n={};i.ajax({url:t,type:"GET",dataType:"json",data:{},timeout:7e3,success:function(t){if(t&&t.data&&t.data&&t.data.userid){var a=t.data;n={displayname:a.displayname,username:a.username,mobile:a.phone,status:!0,avatar:a.avatar,userid:a.userid}}o(n)},error:function(){o(n)}})}},login:function(o){o=o||{};var t=this,n=t.loginInstance,a=o.url||window.location.href;if(o=o||{},n)n.show();else{var n=passport.pop.init({apiOpt:{staticPage:l,product:"cmovie",u:a,memberPass:!0,safeFlag:0,sms:2},cache:!0,forgetLink:"https://passport.baidu.com/?getpass_index",registerLink:"https://passport.baidu.com/v2/?reg&tpl=cmovie&u=",tangram:!0,onLoginSuccess:function(){}});t.loginInstance=n,n.show()}},logout:function(){window.location.href=a("logout",{u:window.location.href})},reg:function(){},getParam:function(){}};n.exports=m});
;/*!common:static/util/location.js*/
define("common:static/util/location.js",function(t,o,i){var e=t("common:static/util/cookie"),a=t("common:static/util/http"),n={options:[],savePosition:function(t){e.set("MOVIE_LOC",t,{path:"/",expires:6e4})},getPosition:function(){var t=e.get("MOVIELOC");return t?"":JSON.parse(t)},saveSelectedCity:function(t){t=t||{},e.set("MOVIE_SELECT",JSON.stringify(t),{path:"/",expires:6e12})},getSelectedCity:function(){var t=this,o=e.get("MOVIE_SELECT");return o&&"undefined"!==o&&"null"!==o||(o="{}"),o=JSON.parse(o),o&&o.cityId||(o=t.getCity()),o},getCity:function(){var t=window._commonData||{},o=t.location||{},i=Page.getData(),e=i.cityId,a=i.cityName;return o.cityId=e||o.cityId||"131",o.cityName=a||o.cityName||"北京",o},getLocation:function(t){function o(t,o){n.isLocating=!1;for(var i,e,a=u.length,c=0;a>c;c++){if(i=u[c],!i)return;i.status||(i.status=!0,e=i[t],e&&"function"==typeof e&&e(o))}u=[]}var i="/common/getlocation";t=t||{};var e=t.success,c=(t.fail,n.getPosition()),s={},u=n.options;return c&&e&&"function"==typeof e?void e(c):(u.push(t),void(n.isLocating||(n.isLocating=!0,a.ajax({url:i,type:"GET",dataType:"json",success:function(t){if(t&&t.data){var i=t.data,e=i.content||{},a=e.address_detail||{};s.addr={address:e.address},s.cityCode=a.city_code,s.cityName=a.city,s.nuomiCityCode=i.nuomi_city_id,t=s,n.savePosition(t),o("success",t)}},error:function(){o("fail")}}))))},getGeocoding:function(t){function o(o){0===o.status?t.success(o):t.geoFail()}var i="//api.map.baidu.com/geocoder/v2/?ak=OGQ8k3SWXmYXs0KTQrDIDG0V&location="+t.latitude+","+t.longitude+"&coordtype="+t.coordtype+"&output=json&pois=0";$.ajax({url:i,dataType:"jsonp",type:"GET",success:o,error:t.geoFail})},transGeocoding:function(t){function o(o){0===o.status?(t.lng=o.result[0].x||null,t.lat=o.result[0].y||null,t.success(t)):t.geoFail()}var i=t.from||5,e="//api.map.baidu.com/geoconv/v1/?ak=OGQ8k3SWXmYXs0KTQrDIDG0V&from="+i+"&to=6&coords="+t.longitude+","+t.latitude;$.ajax({url:e,dataType:"jsonp",type:"GET",success:o,error:t.geoFail})}};i.exports=n});