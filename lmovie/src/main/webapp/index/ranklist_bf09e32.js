define("common:widget/ranklist/ranklist.js",function(require,exports,module){var http=require("common:static/util/http"),template=require("common:static/util/bdTemplate"),LIST_TMPL=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push("");var movies=data.movies||[];if(_template_fun_array.push(""),movies&&0!=movies.length){_template_fun_array.push("");var len=Math.min(movies.length,10);_template_fun_array.push("");var list=movies.splice(0,len);_template_fun_array.push("");for(var counter=0;len>counter;counter++){_template_fun_array.push('<li class="item '),0==counter&&_template_fun_array.push("selected"),_template_fun_array.push('">');var movie=list[counter]||{};_template_fun_array.push('    <span class="rank top">',"undefined"==typeof(counter+1)?"":baidu.template._encodeHTML(counter+1),".</span>    ");var boxTrend=movie.boxTrend||{};_template_fun_array.push('    <h3 class="name" data-url="/movie/detail" data-data={"movieId":',"undefined"==typeof movie.movieId?"":baidu.template._encodeHTML(movie.movieId),"}>","undefined"==typeof movie.movieName?"":baidu.template._encodeHTML(movie.movieName),'    <em class="num font12 '),1==boxTrend&&_template_fun_array.push("up"),_template_fun_array.push("        "),2==boxTrend&&_template_fun_array.push("hori"),_template_fun_array.push("        "),3==boxTrend&&_template_fun_array.push("down"),_template_fun_array.push('">        ',"undefined"==typeof movie.movieBox?"":baidu.template._encodeHTML(movie.movieBox),'</em>    </h3>    <div class="info clearfix">        <div class="img fl">            ');var posterUrl=movie.posterUrl||{};_template_fun_array.push('            <a href="javascript:;" data-url="/movie/detail" data-data={"movieId":',"undefined"==typeof movie.movieId?"":baidu.template._encodeHTML(movie.movieId),'}><img src="',"undefined"==typeof posterUrl.medium?"":baidu.template._encodeHTML(posterUrl.medium),'" /></a>        </div>    </div></li>')}_template_fun_array.push("")}else _template_fun_array.push('<li class="item-empty text-center font-shadow">    还没有票房数据</li>');_template_fun_array.push(""),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],ranklist={init:function(e){var a=this;e=e||{},a.opt=e,a.num=e.num||10,a.getList(),a.getEle(),a.render(),a.bind()},getEle:function(){var e=this;e.ele=$("#commonRanklist"),e.list=e.ele.find(".ranlist")},render:function(){},bind:function(){var e=this,a=$("#commonRanklist"),t=e.opt||{},n=t.page,r=n+".ranklistBk.movieLnk";a.on("mouseenter","li",function(){var e=$(this);e.addClass("selected").siblings().removeClass("selected")}),a.on("click","[data-url]",function(){window.addStat({da_src:r,da_act:"click"})})},getList:function(){var e=this,a=e.opt||{},t=a.sortType||1,n={sortType:t,date:Date.now()},r="";http.ajax({url:"/common/ranklist",data:n,type:"get",success:function(e){r=LIST_TMPL(e),$("#ranklist").html(r)}})},getData:function(){var e,a=this,t=a.opt||{},n="1050",r=t.sortType||1,i={api:n,sortType:r,date:Date.now()};e={pagelets:["pageletRanklist"],url:"/common/ranklist",param:$.param(i),cb:function(){}},BigPipe.load(e)}};module.exports=ranklist});